# BetterVSL - VSS-Compliant Vehicle Data Logger for BeamNG.drive
(generated by claude)

A modern vehicle telemetry logger for BeamNG.drive that outputs data in VSS (Vehicle Signal Specification) format, supporting both JSONL and CSV output formats.

## Features

- **VSS Compliance**: Outputs data using standardized VSS signal paths (e.g., `Vehicle.Speed`, `Vehicle.Powertrain.CombustionEngine.Speed`)
- **Multiple Output Formats**:
  - **JSONL**: Streaming-friendly, one JSON object per line
  - **CSV**: Flattened VSS paths as column headers
- **Configurable Sampling**: Adjustable update rates (use at your own risk, beamng default was 5 secs)
- **Modular Signal Categories**:
  - Vehicle.Speed
  - Vehicle.Powertrain (engine, transmission, fuel)
  - Vehicle.Chassis (wheels, brakes, steering, pedals)
  - Vehicle.Body (lights)
  - Vehicle.CurrentLocation (position, heading)
  - Vehicle.OBD (diagnostics)
- **Real-time Status**: Live logging statistics in UI
- **Buffer Management**: Configurable flush intervals to optimize performance

## Installation

### Method 1: Install from ZIP (Recommended)

1. **Download** the `BetterVSL.zip` file
2. **Locate your BeamNG.drive mods folder**:
   - Windows: `C:/Users/<username>/AppData/Local/BeamNG/BeamNG.drive/current/mods/repo`
3. **Copy** `BetterVSL.zip` directly into the `repo` folder
   - **Do NOT extract the ZIP file** - BeamNG loads zipped mods directly
4. **Launch BeamNG.drive**
5. The mod will be automatically loaded

### Method 2: Manual Installation (Development)

1. **Extract** the ZIP file
2. **Copy** the entire `BetterVSL` folder to:
   - `C:/Users/<username>/AppData/Local/BeamNG/BeamNG.drive/current/mods/unpacked/`
3. **Launch BeamNG.drive**

### Verifying Installation

1. Load any vehicle in BeamNG.drive
2. Open the UI Apps menu (default: `Ctrl + J`)
3. Look for "BetterVSL" or "VSS Logger" in the app list
4. Adjust the position of the app

## Usage

### Basic Logging

1. **Open the BetterVSL app** from the UI Apps menu
2. **Configure settings**:
   - Update Rate: How often to sample data (default: 0.01 seconds = 100Hz)
   - Output Format: Choose JSONL or CSV
   - Select VSS signal categories to log
3. **Click "Start Logging"**
4. Drive your vehicle
5. **Click "Stop Logging"** when finished
6. Files are saved to: `C:/Users/<username>/AppData/Local/BeamNG/BeamNG.drive/current/VSL/YYYYMMDD_HHMMSS/`

### Output Formats

#### JSONL Format (vss_data.jsonl)
```jsonl
{"_metadata":true,"version":"4.0","startTime":"2025-01-15T10:30:00","vehicle":"etk800","updatePeriod":0.01}
{"timestamp":0.01,"Vehicle.Speed":0,"Vehicle.Powertrain.CombustionEngine.Speed":800,"Vehicle.Chassis.Accelerator.PedalPosition":0}
{"timestamp":0.02,"Vehicle.Speed":2.5,"Vehicle.Powertrain.CombustionEngine.Speed":1200,"Vehicle.Chassis.Accelerator.PedalPosition":15.3}
```


#### CSV Format (vss_data.csv)
```csv
# VSS v4.0 | Start: 2025-01-15T10:30:00 | Vehicle: etk800 | Period: 0.01
timestamp,Vehicle.Speed,Vehicle.Powertrain.CombustionEngine.Speed,Vehicle.Chassis.Accelerator.PedalPosition
0.01,0,800,0
0.02,2.5,1200,15.3
```

### Advanced Options

**Buffer Size**: Number of samples to accumulate before writing to disk (default: 1024)
- Smaller = more frequent writes, less memory usage
- Larger = better performance, higher memory usage

**Include Metadata**: Adds VSS version, vehicle info, and timestamp to output files


## VSS Signal Reference

### Vehicle.Speed Category
- `Vehicle.Speed` - Vehicle speed (km/h)
- `Vehicle.Acceleration.Longitudinal` - Longitudinal acceleration (m/s²)
- `Vehicle.AverageSpeed` - Average wheel speed (km/h)

### Vehicle.Powertrain Category
- `Vehicle.Powertrain.CombustionEngine.Speed` - Engine RPM
- `Vehicle.Powertrain.CombustionEngine.ECT` - Engine coolant temp (°C)
- `Vehicle.Powertrain.CombustionEngine.EngineLoadPercent` - Engine load (%)
- `Vehicle.Powertrain.Transmission.CurrentGear` - Current gear
- `Vehicle.Powertrain.FuelSystem.Level` - Fuel level (%)

### Vehicle.Chassis Category
- `Vehicle.Chassis.Accelerator.PedalPosition` - Throttle position (%)
- `Vehicle.Chassis.Brake.PedalPosition` - Brake position (%)
- `Vehicle.Chassis.SteeringWheel.Angle` - Steering angle (degrees)
- `Vehicle.Chassis.Axle.Row[1-2].Wheel.[Left/Right].Speed` - Wheel speeds (km/h)
- `Vehicle.Chassis.Axle.Row[1-2].Wheel.[Left/Right].Tire.Temperature` - Tire temps (°C)
- `Vehicle.Chassis.Axle.Row[1-2].Wheel.[Left/Right].Brake.Temperature` - Brake temps (°C)

### Vehicle.CurrentLocation Category
- `Vehicle.CurrentLocation.Timestamp` - Time since logging started (seconds)
- `Vehicle.CurrentLocation.Latitude` - Position X (meters)
- `Vehicle.CurrentLocation.Longitude` - Position Y (meters)
- `Vehicle.CurrentLocation.Altitude` - Position Z (meters)

### Vehicle.Body Category
- `Vehicle.Body.Lights.IsLowBeamOn` - Headlight status (boolean)

### Vehicle.OBD Category
- `Vehicle.OBD.OdometerReading` - Odometer reading (km)

## Configuration

### Saving/Loading Configurations

1. Click **"Export Config"** to save current settings to JSON
2. Click **"Import Config"** to load previously saved settings
3. Config files are saved in: `Documents/BeamNG.drive/VSL/`

### Example Configuration File
```json
{
  "outputDir": "VSL",
  "updatePeriod": 0.01,
  "format": "vss-jsonl",
  "vssVersion": "4.0",
  "bufferSize": 1024,
  "useCategory": {
    "Vehicle.Speed": true,
    "Vehicle.Powertrain": true,
    "Vehicle.Chassis": true,
    "Vehicle.Body": false,
    "Vehicle.CurrentLocation": true,
    "Vehicle.OBD": false
  }
}
```


## File Structure
```
BetterVSL/
├── lua/
│   └── vehicle/
│       └── extensions/
│           └── bettervsl/
│               ├── bettervsl.lua          # Main extension
│               └── vssMapping.lua         # VSS signal mappings
└── ui/
    └── modules/
        └── apps/
            └── BetterVSL/
                ├── app.html               # UI template
                ├── app.js                 # UI controller
                └── app.json               # App metadata
```

## VSS Specification

This mod implements signals from the [COVESA Vehicle Signal Specification (VSS)](https://covesa.github.io/vehicle_signal_specification/), a standardized way to describe automotive data.

- Current VSS Version: 4.0
- Specification: https://github.com/COVESA/vehicle_signal_specification

## License

This mod is subject to the terms of the bCDDL, v. 1.1.
